---
title: 'Common Errors'
description: 'Solutions to frequently encountered issues in mecanum robot development'
icon: 'triangle-exclamation'
---

## Hardware Issues

### Motors Not Spinning

<AccordionGroup>
  <Accordion title="Motor driver IBT-2 not responding">
    **Symptoms:** Motors don't spin, no sound

    **Possible Causes:**
    1. Power not connected to motor driver
    2. Enable pins (R_EN, L_EN) not HIGH
    3. PWM signal not reaching driver
    4. Motor driver damaged

    **Solutions:**
    ```cpp
    // Verify enable pins are HIGH
    digitalWrite(R_EN, HIGH);
    digitalWrite(L_EN, HIGH);

    // Test PWM output
    ledcWrite(channel, 128);  // 50% duty cycle

    // Check voltage at motor terminals with multimeter
    ```

    **Quick Test:**
    - Disconnect motors from driver
    - Measure voltage at driver output terminals
    - Should see voltage changing with PWM
  </Accordion>

  <Accordion title="Motors spin but wrong direction">
    **Solutions:**
    1. Swap motor wires (+ and -)
    2. Or invert direction in code:
       ```cpp
       // Before
       digitalWrite(MOTOR_DIR1, HIGH);
       digitalWrite(MOTOR_DIR2, LOW);

       // After (inverted)
       digitalWrite(MOTOR_DIR1, LOW);
       digitalWrite(MOTOR_DIR2, HIGH);
       ```
  </Accordion>

  <Accordion title="Motors stutter or jerk">
    **Causes:** Insufficient power, loose connections

    **Solutions:**
    1. Check battery voltage (should be > 10V for 3S)
    2. Tighten all power connections
    3. Add capacitors across motor terminals (100nF)
    4. Check motor driver heat (may be thermal shutdown)
    5. Reduce PWM frequency if too high
  </Accordion>
</AccordionGroup>

---

## Encoder Issues

### Encoder Count Not Changing

<AccordionGroup>
  <Accordion title="No encoder counts">
    **Debug Steps:**
    ```cpp
    void setup() {
        Serial.begin(115200);

        // Test encoder pins directly
        pinMode(ENCODER_A, INPUT);
        pinMode(ENCODER_B, INPUT);

        // Print pin states
        while (true) {
            Serial.print("A: ");
            Serial.print(digitalRead(ENCODER_A));
            Serial.print(" B: ");
            Serial.println(digitalRead(ENCODER_B));
            delay(100);
        }
    }
    ```

    **Expected:** Values should change when motor rotates

    **If no change:**
    1. Check encoder power (5V or 3.3V)
    2. Verify wiring: A → GPIO 34, B → GPIO 35, GND, VCC
    3. Test with external encoder (swap to confirm)
    4. Check if encoder damaged (resistance between pins)
  </Accordion>

  <Accordion title="Count only increases (or only decreases)">
    **Cause:** Channel B not connected or wrong pin

    **Solutions:**
    1. Verify Channel B wiring
    2. Confirm pin_b is input-only pin (ESP32: 34-39)
    3. Swap A and B channels if reversed
  </Accordion>

  <Accordion title="Erratic counting / noise">
    **Solutions:**
    1. Add 0.1µF capacitor across encoder A and B
    2. Use shielded cable for encoder
    3. Keep encoder wires away from motor power
    4. Add pull-up resistors (10kΩ) if needed
    5. Implement software debouncing:
       ```cpp
       volatile unsigned long last_interrupt_time = 0;

       void IRAM_ATTR encoder_isr() {
           unsigned long interrupt_time = millis();
           if (interrupt_time - last_interrupt_time > 5) {  // 5ms debounce
               // Process encoder
               last_interrupt_time = interrupt_time;
           }
       }
       ```
  </Accordion>
</AccordionGroup>

---

## ESP32 / Embedded Issues

### Upload Failed

<AccordionGroup>
  <Accordion title="esptool.py: Serial port not found">
    **Solutions:**
    1. **Windows:** Install CP2102 or CH340 USB driver
    2. **macOS:**
       ```bash
       brew install --cask silicon-labs-vcp-driver
       ```
    3. **Linux:** Add user to dialout group
       ```bash
       sudo usermod -a -G dialout $USER
       # Logout and login
       ```
    4. Check USB cable (must be data cable, not charge-only)
    5. Try different USB port
  </Accordion>

  <Accordion title="Failed to connect to ESP32">
    **Solutions:**
    1. Hold BOOT button while clicking Upload
    2. Press EN (reset) button, then try upload
    3. Lower upload speed in platformio.ini:
       ```ini
       upload_speed = 115200  # Instead of 921600
       ```
    4. Check ESP32 power (LED should be on)
  </Accordion>

  <Accordion title="Brownout detector triggered">
    **Cause:** Insufficient power supply

    **Solutions:**
    1. Use external 5V power (not USB)
    2. Add bulk capacitor (1000µF) near ESP32 VIN
    3. Don't draw too much current from 3.3V pin
    4. Power motors from separate supply
  </Accordion>
</AccordionGroup>

---

## ROS2 Issues

### Node Not Starting

<AccordionGroup>
  <Accordion title="Package not found">
    **Error:** `Package 'mecanum_control' not found`

    **Solutions:**
    1. Build package:
       ```bash
       cd ~/ros2_ws
       colcon build --packages-select mecanum_control
       ```
    2. Source workspace:
       ```bash
       source install/setup.bash
       ```
    3. Add to ~/.bashrc to auto-source:
       ```bash
       echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc
       ```
  </Accordion>

  <Accordion title="Executable not found">
    **Error:** `Executable 'motor_controller' not found`

    **Solutions:**
    1. Verify entry_points in setup.py:
       ```python
       entry_points={
           'console_scripts': [
               'motor_controller = mecanum_control.motor_controller:main',
           ],
       },
       ```
    2. Rebuild:
       ```bash
       colcon build --packages-select mecanum_control
       source install/setup.bash
       ```
  </Accordion>

  <Accordion title="Import error / ModuleNotFoundError">
    **Solutions:**
    1. Add dependency to package.xml:
       ```xml
       <exec_depend>geometry_msgs</exec_depend>
       ```
    2. Install Python dependencies:
       ```bash
       sudo apt install python3-numpy python3-scipy
       ```
    3. Use rosdep:
       ```bash
       rosdep install --from-paths src --ignore-src -r -y
       ```
  </Accordion>
</AccordionGroup>

### Topic/Communication Issues

<AccordionGroup>
  <Accordion title="No data on topic">
    **Debug:**
    ```bash
    # Check if topic exists
    ros2 topic list

    # Check publishers
    ros2 topic info /scan

    # Echo topic
    ros2 topic echo /scan
    ```

    **If no data:**
    1. Verify publisher node is running: `ros2 node list`
    2. Check topic name (case-sensitive!)
    3. Verify QoS compatibility
  </Accordion>

  <Accordion title="Transform timeout / TF errors">
    **Error:** `Could not transform from 'map' to 'base_link'`

    **Solutions:**
    1. Check TF tree:
       ```bash
       ros2 run tf2_tools view_frames
       # Opens frames.pdf
       ```
    2. Verify all frames are published
    3. Check robot_state_publisher is running
    4. Ensure static transforms are published
  </Accordion>
</AccordionGroup>

---

## Navigation Issues

### Robot Won't Navigate

<AccordionGroup>
  <Accordion title="Nav2 fails to plan path">
    **Causes:**
    1. Start or goal outside map
    2. No valid path (blocked by obstacles)
    3. Costmap not configured correctly

    **Solutions:**
    ```bash
    # Visualize in RViz
    ros2 launch mecanum_navigation navigation.launch.py

    # Check costmaps:
    # - global_costmap: Should show map
    # - local_costmap: Should show obstacles

    # Verify start pose is set:
    ros2 topic echo /initialpose

    # Check planner is running:
    ros2 node info /planner_server
    ```
  </Accordion>

  <Accordion title="Robot spins in place / oscillates">
    **Cause:** Controller parameters not tuned

    **Solutions:**
    Reduce gains in nav2_params.yaml:
    ```yaml
    controller_server:
      ros__parameters:
        FollowPath:
          max_vel_x: 0.3      # Reduce from 0.5
          max_vel_theta: 0.5  # Reduce rotation speed
          xy_goal_tolerance: 0.15  # Increase tolerance
          yaw_goal_tolerance: 0.25
    ```
  </Accordion>
</AccordionGroup>

---

## Power & Battery Issues

<AccordionGroup>
  <Accordion title="Robot shuts down unexpectedly">
    **Causes:**
    1. Battery low voltage cutoff triggered
    2. Fuse blown
    3. Loose power connection

    **Solutions:**
    1. Check battery voltage with multimeter
       - 3S LiPo: Minimum 9.0V (3.0V/cell)
       - Replace/recharge if < 10V
    2. Inspect fuse continuity
    3. Tighten all power connections
    4. Add LiPo voltage alarm (buzzer at 3.3V/cell)
  </Accordion>

  <Accordion title="Motors weak / slow">
    **Cause:** Voltage drop under load

    **Solutions:**
    1. Use fresh/charged battery
    2. Upgrade to higher capacity battery
    3. Reduce wire resistance (thicker gauge)
    4. Check for corrosion on connectors
    5. Measure voltage at motor driver under load
  </Accordion>
</AccordionGroup>

---

## Quick Diagnostic Checklist

<Steps>
  <Step title="Power">
    - Battery voltage > 10V
    - All power LEDs on
    - No loose connections
  </Step>

  <Step title="Connectivity">
    - ESP32 serial connected
    - ROS2 nodes running: `ros2 node list`
    - Topics publishing: `ros2 topic hz /scan`
  </Step>

  <Step title="Sensors">
    - LiDAR spinning and publishing
    - Encoders counting
    - IMU data valid
  </Step>

  <Step title="Control">
    - Velocity commands received
    - Motors responding
    - Wheels moving in correct direction
  </Step>
</Steps>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="FAQ" icon="question" href="/troubleshooting/faq">
    Frequently asked questions and answers
  </Card>

  <Card title="Debugging Guide" icon="bug" href="/troubleshooting/debugging-guide">
    Systematic debugging methodology
  </Card>

  <Card title="Getting Help" icon="handshake-angle" href="/troubleshooting/getting-help">
    Where to ask for assistance
  </Card>

  <Card title="Resources" icon="book" href="/troubleshooting/resources">
    Additional documentation and tutorials
  </Card>
</CardGroup>
